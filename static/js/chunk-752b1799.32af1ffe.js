(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-752b1799"],{"0920":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-row",{attrs:{gutter:14}},[i("el-col",{staticClass:"main",attrs:{span:15,offset:3}},[i("div",{staticClass:"panel"},[i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"clearfix main-title",attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"topic-full-title"},["share"===t.topic_details.topic_type?i("el-tag",{attrs:{size:"small"}},[t._v("分享")]):"ask"===t.topic_details.topic_type?i("el-tag",{attrs:{size:"small",type:"success"}},[t._v("问答")]):t._e(),t._v(" "),i("span",{staticClass:"title"},[t._v(t._s(t.topic_details.title))]),t._v(" "),i("div",{staticClass:"title-details"},[i("span",[t._v("发布于 "+t._s(t._f("formatLocalTime")(t.topic_details.created_at,t.topic_details.created_at)))]),t._v(" "),i("span",[t._v("作者"),i("a",{attrs:{href:"#"+t.topic_details.author.author_name}},[t._v(t._s(t.topic_details.author.author_name))])]),t._v(" "),i("span",[t._v(t._s(t.topic_details.pageviews)+" 次浏览")]),t._v(" "),"share"===t.topic_details.topic_type?i("span",[t._v("来自 分享")]):"ask"===t.topic_details.topic_type?i("span",[t._v("来自 问答")]):t._e(),t._v(" "),i("div",{staticClass:"handle"},[i("router-link",{attrs:{to:"/forum/edit/"+t.topic_details.id}},[i("el-button",{staticClass:"edit",attrs:{type:"primary",icon:"el-icon-edit",circle:""}})],1),t._v(" "),i("el-button",{staticClass:"bookmark",attrs:{type:"warning",icon:"el-icon-star-off",circle:""}})],1)])],1)]),t._v(" "),i("div",{staticClass:"main-content"},[t._v("\n            "+t._s(t.topic_details.content)+"\n          ")])]),i("br"),t._v(" "),0!==t.topic_details.reply_count?i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(t.topic_details.reply_count)+" 回复")])]),t._v(" "),t._l(t.topic_details.replies,(function(e,a){return i("div",{key:e.id,staticClass:"reply-list"},[i("div",{staticClass:"reply-item",attrs:{id:e.id}},[i("div",{staticClass:"author-content"},[i("a",{staticClass:"user-avatar",attrs:{href:"#"+e.author.author_name}},[i("img",{attrs:{src:e.author.avatar_url}})]),t._v(" "),i("div",{staticClass:"user-info"},[i("a",{staticClass:"dark reply-author",attrs:{href:"#"+e.author.author_name}},[t._v(t._s(e.author.author_name))]),t._v(" "),i("a",{staticClass:"reply-time",attrs:{href:"#"+e.id}},[t._v(t._s(a+1)+"楼 • "+t._s(t._f("formatLocalTime")(e.created_at,e.created_at)))])]),t._v(" "),i("div",{staticClass:"user-action"},[i("span",[i("svg-icon",{attrs:{"icon-class":"reply",title:"回复"},on:{click:function(e){return t.showReply(a)}}})],1)])]),t._v(" "),i("div",{staticClass:"reply-content"},[t._v("\n                "+t._s(e.content)+"\n              ")]),t._v(" "),i("div",{staticClass:"clearfix"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow.includes(a),expression:"isShow.includes(index)"}],staticClass:"reply2-area"},[i("el-form",{ref:"replyForm",refInFor:!0,attrs:{model:t.replyForm}},[i("el-form-item",[i("markdown-editor",{attrs:{height:"200px"},model:{value:t.replyForm.content,callback:function(e){t.$set(t.replyForm,"content",e)},expression:"replyForm.content"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("replyForm")}}},[t._v("回复")]),t._v(" "),i("el-button",{on:{click:function(e){return t.handleCancel(a)}}},[t._v("取消")])],1)],1)],1)])])])}))],2):t._e(),i("br"),t._v(" "),i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("添加回复")])]),t._v(" "),i("el-form",{ref:"addReplyForm",attrs:{model:t.addReplyForm}},[i("el-form-item",[i("markdown-editor",{attrs:{height:"200px"},model:{value:t.addReplyForm.content,callback:function(e){t.$set(t.addReplyForm,"content",e)},expression:"addReplyForm.content"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("addReplyForm")}}},[t._v("回复")])],1)],1)],1)],1)]),t._v(" "),i("el-col",{attrs:{span:4}},[i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("作者")])]),t._v(" "),i("div",{staticClass:"card-main"},[i("a",{staticClass:"user-avatar",attrs:{href:"https://cnodejs.org/user/"+t.topic_details.author.loginname,target:"_blank"}},[i("img",{attrs:{src:t.topic_details.author.avatar_url,title:t.topic_details.author.loginname}})]),t._v(" "),i("span",{staticClass:"user-name"},[i("a",{staticClass:"dark",attrs:{href:"#"+t.topic_details.author.author_name}},[t._v(t._s(t.topic_details.author.author_name))])]),t._v(" "),i("div",{staticClass:"user-details"},[t._v("\n            预留部分  包括上传 下载  分享率 等...\n          ")])])]),i("br"),t._v(" "),i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("该部分待考虑")])]),t._v(" "),t._l(t.author_topics.recent_topics,(function(e){return i("div",{key:e},[i("a",{staticClass:"topic-title",attrs:{href:"https://cnodejs.org/topic/"+e.id}},[t._v(t._s(e.title))])])}))],2)],1)],1)],1)},n=[],r=i("16d8"),s=i("1540"),o=i("ed08"),l={components:{MarkdownEditor:r["a"]},filters:{formatLocalTime:function(t){return Object(o["b"])(Object(o["c"])(t))}},data:function(){return{topic_details:[],author_topics:[],isShow:[],replyForm:{content:""},addReplyForm:{content:""}}},created:function(){var t=this.$route.params&&this.$route.params.id;this.getDetails(t)},methods:{getDetails:function(t){var e=this;Object(s["a"])(t).then((function(t){e.topic_details=t.data,e.setPageTitle()})).catch((function(t){console.log(t)}))},setPageTitle:function(){var t="Topic Details";document.title="".concat(t," - ").concat(this.topic_details.title)},showReply:function(t){if(-1!==this.isShow.indexOf(t))return!1;this.isShow.push(t)},handleCancel:function(t){var e=this.isShow.indexOf(t);this.isShow.splice(e,1)},onSubmit:function(t){console.log(this.$refs[t].model.content)}}},c=l,u=(i("7458"),i("2877")),d=Object(u["a"])(c,a,n,!1,null,"6aa64578",null);e["default"]=d.exports},1540:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return r}));var a=i("b775");function n(t){return Object(a["a"])({url:"/forum/list",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/forum/details",method:"get",params:{id:t}})}},"16d8":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}})},n=[],r=i("db72"),s=(i("a7be"),i("44f8"),i("a6e0"),i("547e")),o=i.n(s),l={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},c={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return l}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},l,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new o.a(Object(r["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(t){this.editor.setValue(t)},getValue:function(){return this.editor.getValue()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},u=c,d=i("2877"),h=Object(d["a"])(u,a,n,!1,null,null,null);e["a"]=h.exports},"1a2d":function(t,e,i){},"28a5":function(t,e,i){"use strict";var a=i("aae3"),n=i("cb7c"),r=i("ebd6"),s=i("0390"),o=i("9def"),l=i("5f1b"),c=i("520a"),u=i("79e5"),d=Math.min,h=[].push,p="split",f="length",v="lastIndex",_=4294967295,m=!u((function(){RegExp(_,"y")}));i("214f")("split",2,(function(t,e,i,u){var g;return g="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[f]||2!="ab"[p](/(?:ab)*/)[f]||4!="."[p](/(.?)(.?)/)[f]||"."[p](/()()/)[f]>1||""[p](/.?/)[f]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!a(t))return i.call(n,t,e);var r,s,o,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===e?_:e>>>0,m=new RegExp(t.source,u+"g");while(r=c.call(m,n)){if(s=m[v],s>d&&(l.push(n.slice(d,r.index)),r[f]>1&&r.index<n[f]&&h.apply(l,r.slice(1)),o=r[0][f],d=s,l[f]>=p))break;m[v]===r.index&&m[v]++}return d===n[f]?!o&&m.test("")||l.push(""):l.push(n.slice(d)),l[f]>p?l.slice(0,p):l}:"0"[p](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,a){var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n,a):g.call(String(n),i,a)},function(t,e){var a=u(g,t,this,e,g!==i);if(a.done)return a.value;var c=n(t),h=String(this),p=r(c,RegExp),f=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(m?"y":"g"),y=new p(m?c:"^(?:"+c.source+")",v),b=void 0===e?_:e>>>0;if(0===b)return[];if(0===h.length)return null===l(y,h)?[h]:[];var w=0,x=0,C=[];while(x<h.length){y.lastIndex=m?x:0;var k,S=l(y,m?h:h.slice(x));if(null===S||(k=d(o(y.lastIndex+(m?0:x)),h.length))===w)x=s(h,x,f);else{if(C.push(h.slice(w,x)),C.length===b)return C;for(var F=1;F<=S.length-1;F++)if(C.push(S[F]),C.length===b)return C;x=w=k}}return C.push(h.slice(w)),C}]}))},3846:function(t,e,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},"5d58":function(t,e,i){t.exports=i("d8d6")},"67bb":function(t,e,i){t.exports=i("f921")},"6b54":function(t,e,i){"use strict";i("3846");var a=i("cb7c"),n=i("0bfb"),r=i("9e1e"),s="toString",o=/./[s],l=function(t){i("2aba")(RegExp.prototype,s,t,!0)};i("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?l((function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?n.call(t):void 0)})):o.name!=s&&l((function(){return o.call(this)}))},7458:function(t,e,i){"use strict";var a=i("1a2d"),n=i.n(a);n.a},ed08:function(t,e,i){"use strict";i("28a5"),i("a481"),i("6b54");var a=i("5d58"),n=i.n(a),r=i("67bb"),s=i.n(r);function o(t){return o="function"===typeof s.a&&"symbol"===typeof n.a?function(t){return typeof t}:function(t){return t&&"function"===typeof s.a&&t.constructor===s.a&&t!==s.a.prototype?"symbol":typeof t},o(t)}function l(t,e){if(0===arguments.length)return null;var i,a=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===o(t)?i=t:("string"===typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"===typeof t&&10===t.toString().length&&(t*=1e3),i=new Date(t));var n={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},r=a.replace(/{(y|m|d|h|i|s|a)+}/g,(function(t,e){var i=n[e];return"a"===e?["日","一","二","三","四","五","六"][i]:(t.length>0&&i<10&&(i="0"+i),i||0)}));return r}function c(t,e){t=10===(""+t).length?1e3*parseInt(t):+t;var i=new Date(t),a=Date.now(),n=(a-i)/1e3;return n<30?"刚刚":n<3600?Math.ceil(n/60)+"分钟前":n<86400?Math.ceil(n/3600)+"小时前":n<172800?"1天前":e?l(t,e):i.getMonth()+1+"月"+i.getDate()+"日"+i.getHours()+"时"+i.getMinutes()+"分"}function u(t){return new Date(Date.parse(t.replace(/-/g,"/"))).getTime()/1e3}function d(t){var e=t,i=1024,a=1048576,n=1073741824,r=1099511627776,s=0x4000000000000,o=0x1000000000000000;return e<a?(e/i).toFixed(2)+" KB":e===a?"1.00 MB":e>a&&e<n?(e/a).toFixed(2)+" MB":e===n?"1.00 GB":e>n&&e<r?(e/n).toFixed(2)+" GB":e===r?"1.00 TB":e>r&&e<s?(e/r).toFixed(2)+" TB":e===s?"1.00 PB":e>s&&e<o?(e/s).toFixed(2)+" PB":"文件超过1.00 EB"}i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return u})),i.d(e,"a",(function(){return d}))}}]);