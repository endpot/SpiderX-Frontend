(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18be978e"],{"0920":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:14}},[a("el-col",{staticClass:"main",attrs:{span:15,offset:3}},[a("div",{staticClass:"panel"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix main-title",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"topic-full-title"},["share"===t.topic_details.topic_type?a("el-tag",{attrs:{size:"small"}},[t._v("分享")]):"ask"===t.topic_details.topic_type?a("el-tag",{attrs:{size:"small",type:"success"}},[t._v("问答")]):t._e(),t._v(" "),a("span",{staticClass:"title"},[t._v(t._s(t.topic_details.title))]),t._v(" "),a("div",{staticClass:"title-details"},[a("span",[t._v("发布于 "+t._s(t._f("formatLocalTime")(t.topic_details.created_at,t.topic_details.created_at)))]),t._v(" "),a("span",[t._v("作者"),a("a",{attrs:{href:"#"+t.topic_details.author.author_name}},[t._v(t._s(t.topic_details.author.author_name))])]),t._v(" "),a("span",[t._v(t._s(t.topic_details.pageviews)+" 次浏览")]),t._v(" "),"share"===t.topic_details.topic_type?a("span",[t._v("来自 分享")]):"ask"===t.topic_details.topic_type?a("span",[t._v("来自 问答")]):t._e(),t._v(" "),a("div",{staticClass:"handle"},[a("router-link",{attrs:{to:"/forum/edit/"+t.topic_details.id}},[a("el-button",{staticClass:"edit",attrs:{type:"primary",icon:"el-icon-edit",circle:""}})],1),t._v(" "),a("el-button",{staticClass:"bookmark",attrs:{type:"warning",icon:"el-icon-star-off",circle:""}})],1)])],1)]),t._v(" "),a("div",{staticClass:"main-content"},[t._v("\n            "+t._s(t.topic_details.content)+"\n          ")])]),a("br"),t._v(" "),0!==t.topic_details.reply_count?a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.topic_details.reply_count)+" 回复")])]),t._v(" "),t._l(t.topic_details.replies,(function(e,i){return a("div",{key:e.id,staticClass:"reply-list"},[a("div",{staticClass:"reply-item",attrs:{id:e.id}},[a("div",{staticClass:"author-content"},[a("a",{staticClass:"user-avatar",attrs:{href:"#"+e.author.author_name}},[a("img",{attrs:{src:e.author.avatar_url}})]),t._v(" "),a("div",{staticClass:"user-info"},[a("a",{staticClass:"dark reply-author",attrs:{href:"#"+e.author.author_name}},[t._v(t._s(e.author.author_name))]),t._v(" "),a("a",{staticClass:"reply-time",attrs:{href:"#"+e.id}},[t._v(t._s(i+1)+"楼 • "+t._s(t._f("formatLocalTime")(e.created_at,e.created_at)))])]),t._v(" "),a("div",{staticClass:"user-action"},[a("span",[a("svg-icon",{attrs:{"icon-class":"reply",title:"回复"},on:{click:function(e){return t.showReply(i)}}})],1)])]),t._v(" "),a("div",{staticClass:"reply-content"},[t._v("\n                "+t._s(e.content)+"\n              ")]),t._v(" "),a("div",{staticClass:"clearfix"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow.includes(i),expression:"isShow.includes(index)"}],staticClass:"reply2-area"},[a("el-form",{ref:"replyForm",refInFor:!0,attrs:{model:t.replyForm}},[a("el-form-item",[a("markdown-editor",{attrs:{height:"200px"},model:{value:t.replyForm.content,callback:function(e){t.$set(t.replyForm,"content",e)},expression:"replyForm.content"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("replyForm")}}},[t._v("回复")]),t._v(" "),a("el-button",{on:{click:function(e){return t.handleCancel(i)}}},[t._v("取消")])],1)],1)],1)])])])}))],2):t._e(),a("br"),t._v(" "),a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加回复")])]),t._v(" "),a("el-form",{ref:"addReplyForm",attrs:{model:t.addReplyForm}},[a("el-form-item",[a("markdown-editor",{attrs:{height:"200px"},model:{value:t.addReplyForm.content,callback:function(e){t.$set(t.addReplyForm,"content",e)},expression:"addReplyForm.content"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("addReplyForm")}}},[t._v("回复")])],1)],1)],1)],1)]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("作者")])]),t._v(" "),a("div",{staticClass:"card-main"},[a("a",{staticClass:"user-avatar",attrs:{href:"https://cnodejs.org/user/"+t.topic_details.author.loginname,target:"_blank"}},[a("img",{attrs:{src:t.topic_details.author.avatar_url,title:t.topic_details.author.loginname}})]),t._v(" "),a("span",{staticClass:"user-name"},[a("a",{staticClass:"dark",attrs:{href:"#"+t.topic_details.author.author_name}},[t._v(t._s(t.topic_details.author.author_name))])]),t._v(" "),a("div",{staticClass:"user-details"},[t._v("\n            预留部分  包括上传 下载  分享率 等...\n          ")])])]),a("br"),t._v(" "),a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("该部分待考虑")])]),t._v(" "),t._l(t.author_topics.recent_topics,(function(e){return a("div",{key:e},[a("a",{staticClass:"topic-title",attrs:{href:"https://cnodejs.org/topic/"+e.id}},[t._v(t._s(e.title))])])}))],2)],1)],1)],1)},s=[],r=a("16d8"),o=a("1540"),n=a("ed08"),l={components:{MarkdownEditor:r["a"]},filters:{formatLocalTime:function(t){return Object(n["b"])(Object(n["d"])(t))}},data:function(){return{topic_details:[],author_topics:[],isShow:[],replyForm:{content:""},addReplyForm:{content:""}}},created:function(){var t=this.$route.params&&this.$route.params.id;this.getDetails(t)},methods:{getDetails:function(t){var e=this;Object(o["a"])(t).then((function(t){e.topic_details=t.data,e.setPageTitle()})).catch((function(t){console.log(t)}))},setPageTitle:function(){var t="Topic Details";document.title="".concat(t," - ").concat(this.topic_details.title)},showReply:function(t){if(-1!==this.isShow.indexOf(t))return!1;this.isShow.push(t)},handleCancel:function(t){var e=this.isShow.indexOf(t);this.isShow.splice(e,1)},onSubmit:function(t){console.log(this.$refs[t].model.content)}}},c=l,d=(a("7458"),a("2877")),u=Object(d["a"])(c,i,s,!1,null,"6aa64578",null);e["default"]=u.exports},1540:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r}));var i=a("b775");function s(t){return Object(i["a"])({url:"/forum/list",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/forum/details",method:"get",params:{id:t}})}},"16d8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:t.id}})},s=[],r=a("db72"),o=(a("a7be"),a("44f8"),a("a6e0"),a("547e")),n=a.n(o),l={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},c={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return l}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},l,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new n.a(Object(r["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(t){this.editor.setValue(t)},getValue:function(){return this.editor.getValue()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},d=c,u=a("2877"),h=Object(u["a"])(d,i,s,!1,null,null,null);e["a"]=h.exports},"1a2d":function(t,e,a){},7458:function(t,e,a){"use strict";var i=a("1a2d"),s=a.n(i);s.a}}]);