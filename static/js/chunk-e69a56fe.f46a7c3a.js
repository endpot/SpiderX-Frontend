(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e69a56fe","chunk-10f5135c"],{"16d8":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:t.id}})},o=[],a=n("db72"),r=(n("a7be"),n("44f8"),n("a6e0"),n("547e")),s=n.n(r),u={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},l={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return u}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},u,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new s.a(Object(a["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(t){this.editor.setValue(t)},getValue:function(){return this.editor.getValue()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},d=l,c=n("2877"),f=Object(c["a"])(d,i,o,!1,null,null,null);e["a"]=f.exports},"8e1f":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("New+")])]),t._v(" "),n("div",{staticClass:"main-text"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{label:"Title",prop:"announce_title","label-width":"100px"}},[n("el-input",{model:{value:t.form.announce_title,callback:function(e){t.$set(t.form,"announce_title",e)},expression:"form.announce_title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Created By",prop:"announce_footer_note","label-width":"100px"}},[n("el-input",{model:{value:t.form.announce_footer_note,callback:function(e){t.$set(t.form,"announce_footer_note",e)},expression:"form.announce_footer_note"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"announce_text"}},[n("markdown-editor",{staticClass:"md-editor",attrs:{height:"400px"},model:{value:t.form.announce_text,callback:function(e){t.$set(t.form,"announce_text",e)},expression:"form.announce_text"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")]),t._v(" "),n("el-button",{on:{click:t.handleCancel}},[t._v("取消")])],1)],1)],1)])],1)},o=[],a=n("16d8"),r=n("b775");function s(t){return Object(r["a"])({url:"/home/announce/details",method:"get",params:{id:t}})}var u={announce_id:void 0,announce_title:"",announce_text:"",announce_footer_note:"SpiderX-Frontend",announce_time:""},l={components:{MarkdownEditor:a["a"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){var t=this,e=function(e,n,i){""===n?(t.$message({message:e.field+"为必填项",type:"error"}),i(new Error(e.field+"为必填项"))):i()};return{form:Object.assign({},u),rules:{announce_title:[{validator:e}],announce_text:[{validator:e}],announce_footer_note:[{validator:e}]},tempRoute:{},checked:!0,loading:!1}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.getDetails(t)}else this.form=Object.assign({},u);this.tempRoute=Object.assign({},this.$route)},methods:{getDetails:function(t){var e=this;s(t).then((function(t){e.form=t.data,e.setPageTitle()})).catch((function(t){console.log(t)}))},setPageTitle:function(){var t="Edit Topic";document.title="".concat(t," - ").concat(this.form.announce_title)},handleSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return console.log("err submit"),!1;t.loading=!0,t.$notify({title:"成功",message:"发布话题成功",type:"success",duration:2e3}),t.loading=!1}))},handleCancel:function(){this.$router.go(-1)}}},d=l,c=n("2877"),f=Object(c["a"])(d,i,o,!1,null,"a958ddba",null);e["default"]=f.exports},cd2a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("announce",{attrs:{"is-edit":!1}})},o=[],a=n("8e1f"),r={name:"CreateAnnounce",components:{Announce:a["default"]}},s=r,u=n("2877"),l=Object(u["a"])(s,i,o,!1,null,null,null);e["default"]=l.exports}}]);