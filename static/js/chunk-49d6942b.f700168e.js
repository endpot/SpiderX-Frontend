(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49d6942b"],{"05eb":function(t,e,i){"use strict";var a=i("2898"),o=i.n(a);o.a},"16d8":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}})},o=[],r=i("db72"),l=(i("a7be"),i("44f8"),i("a6e0"),i("547e")),n=i.n(l),s={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},u={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return s}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},s,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new n.a(Object(r["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(t){this.editor.setValue(t)},getValue:function(){return this.editor.getValue()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},d=u,c=i("2877"),f=Object(c["a"])(d,a,o,!1,null,null,null);e["a"]=f.exports},2898:function(t,e,i){},6396:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("torrent",{attrs:{"is-edit":!1}})},o=[],r=i("d064"),l={name:"UploadTorrent",components:{Torrent:r["a"]}},n=l,s=i("2877"),u=Object(s["a"])(n,a,o,!1,null,null,null);e["default"]=u.exports},8230:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return r}));var a=i("b775");function o(t){return Object(a["a"])({url:"/torrent/list",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/torrent/details",method:"get",params:{id:t}})}},d064:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-card",{staticClass:"box-card"},[t.isEdit?i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("Edit: title")])]):t._e(),t._v(" "),i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[i("el-form-item",{attrs:{label:"File",prop:"file","label-width":"70px"}},[i("el-upload",{staticClass:"torrent-file-upload",attrs:{action:"#","on-change":t.handleChange,"file-list":t.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"Title",prop:"title","label-width":"70px"}},[i("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"Category",prop:"category","label-width":"70px"}},[i("el-select",{attrs:{clearable:""},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}},t._l(t.categoryList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"Type",prop:"type","label-width":"70px"}},[i("el-select",{attrs:{clearable:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.typeList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"IMDB",prop:"imdb","label-width":"70px"}},[i("el-input",{model:{value:t.form.imdb,callback:function(e){t.$set(t.form,"imdb",e)},expression:"form.imdb"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"Douban",prop:"douban","label-width":"70px"}},[i("el-input",{model:{value:t.form.douban,callback:function(e){t.$set(t.form,"douban",e)},expression:"form.douban"}})],1),t._v(" "),i("el-form-item",{attrs:{prop:"title"}},[i("markdown-editor",{staticClass:"md-editor",attrs:{height:"400px"},model:{value:t.form.descr,callback:function(e){t.$set(t.form,"descr",e)},expression:"form.descr"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("Submit")]),t._v(" "),i("el-button",{on:{click:t.handleCancel}},[t._v("Cancel")])],1)],1)],1)],1)},o=[],r=i("16d8"),l=i("8230"),n={id:void 0,title:"",category:"",type:"",imdb:"this is imdb link",douban:"this is douban link",descr:""},s={components:{MarkdownEditor:r["a"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){var t=this,e=function(e,i,a){""===i?(t.$message({message:e.field+"为必填项",type:"error"}),a(new Error(e.field+"为必填项"))):a()};return{fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1j"}],form:Object.assign({},n),rules:{title:[{validator:e}],category:[{validator:e}],type:[{validator:e}]},tempRoute:{},categoryList:[{label:"Movie",value:"movie"},{label:"Tvseries",value:"tvseries"},{label:"Anime",value:"anime"},{label:"Tvshow",value:"tvshow"},{label:"Music",value:"music"}],typeList:[{label:"2160p",value:"2160p"},{label:"1080p",value:"1080p"},{label:"720p",value:"720p"},{label:"Encode",value:"encode"}]}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.getDetails(t)}else this.form=Object.assign({},n);this.tempRoute=Object.assign({},this.$route)},methods:{getDetails:function(t){var e=this;Object(l["a"])(t).then((function(t){e.form=t.data,e.setPageTitle()}))},setPageTitle:function(){var t="Edit Torrent";document.title="".concat(t," - ").concat(this.form.title)},handleSubmit:function(){var t=this;console.log(this.form),this.$refs.form.validate((function(e){if(!e)return console.log("err submit"),!1;t.loading=!0,t.$notify({title:"成功",message:"发布种子成功",type:"success",duration:2e3}),t.loading=!1,t.$router.push("/torrent/details/"+t.$route.params.id)}))},handleCancel:function(){this.$router.go(-1)},handleChange:function(t,e){this.fileList=e.slice(-3)}}},u=s,d=(i("05eb"),i("2877")),c=Object(d["a"])(u,a,o,!1,null,"a0c75872",null);e["a"]=c.exports}}]);